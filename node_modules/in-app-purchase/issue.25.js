var iap = require('./');
var windowsReceipt = "<Receipt Version=\"2.0\" CertificateId=\"A656B9B1B3AA509EEA30222E6D5E7DBDA9822DCD\" xmlns=\"http://schemas.microsoft.com/windows/2012/store/receipt\"><ProductReceipt PurchasePrice=\"$0\" PurchaseDate=\"2015-12-16T09:33:59.613Z\" Id=\"1f41b1ff-210f-4be0-8db3-b746d8d87d37\" AppId=\"3906NikolayDavidenko.WPSlots2Test_mzyx4maq09rr4\" ProductId=\"coins_100\" ProductType=\"Consumable\" PublisherUserId=\"4+460VFG5YUVFMhnCg9Jxq2jAX3ikr02bdj7QJ4kpYM=\" PublisherDeviceId=\"j2zn9jpt+51yLDbq0aW3inKiKdgT7pJnFKMKiknD/ug=\" MicrosoftProductId=\"d967606b-c78a-4567-af73-894c8d852f03\" MicrosoftAppId=\"e84c1075-cd38-4ce2-ad1a-9202ce4bbde4\" /><Signature xmlns=\"http://www.w3.org/2000/09/xmldsig#\"><SignedInfo><CanonicalizationMethod Algorithm=\"http://www.w3.org/TR/2001/REC-xml-c14n-20010315\" /><SignatureMethod Algorithm=\"http://www.w3.org/2001/04/xmldsig-more#rsa-sha256\" /><Reference URI=\"\"><Transforms><Transform Algorithm=\"http://www.w3.org/2000/09/xmldsig#enveloped-signature\" /></Transforms><DigestMethod Algorithm=\"http://www.w3.org/2001/04/xmlenc#sha256\" /><DigestValue>lL32xbIYS1hOIZEKHO713Ah3tx+7Z004n1EYBq+Wxng=</DigestValue></Reference></SignedInfo><SignatureValue>ajbOwQ5enxNEZNXazifkjkKiC5rQOyAL5HXIqYgRoq6S2j3cAVytnjT4mQBocmk8I/sUW1sS+xFOuWV4j1S0URrle5mHE5PZVztdodmts2QI0q1/ol1272mqfARtbc1xeY60uVc9zVzvv41GgYiBfXBAMKzN4lVU4Tra23EjyD2jN9HK1+rC1yYSB6gSuV95DqAHj6sy/f2mjEsY007zNC+CmdKtprJiH8NmJhVtDQHNQGMmg3gipige8grVVl+unPfXOF7RI+h9J2O3RGoFuKBWil+dLBkNXAbEpe5l6WSEEV31Gw0oz2NyYSbxiPef6R2ZXWukt/gBtLmRGN7rFw==</SignatureValue></Signature></Receipt>";

iap.setup(function (err) {
    if (err) {
        console.error(err);
    }
    iap.validate(iap.WINDOWS, windowsReceipt, function (err, windowsRes) {
        if (err) {
            console.error(err);
        }
        if (iap.isValidated(windowsRes)) {
            console.info("Ok");
        }
    });
});
